<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>NSP School</title>


    <link href="~/Content/css/plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet">
    <link href="~/Content/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/fonts/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="~/Content/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="~/Content/css/plugins/chosen/chosen.css" rel="stylesheet">
    <link href="~/Content/css/plugins/colorpicker/bootstrap-colorpicker.min.css" rel="stylesheet">
    <link href="~/Content/css/plugins/cropper/cropper.min.css" rel="stylesheet">
    <link href="~/Content/css/plugins/switchery/switchery.css" rel="stylesheet">
    <link href="~/Content/css/plugins/jasny/jasny-bootstrap.min.css" rel="stylesheet">
    <link href="~/Content/css/plugins/nouslider/jquery.nouislider.css" rel="stylesheet">
    <link href="~/Content/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
    <link href="~/Content/css/plugins/ionRangeSlider/ion.rangeSlider.css" rel="stylesheet">
    <link href="~/Content/css/plugins/ionRangeSlider/ion.rangeSlider.skinFlat.css" rel="stylesheet">
    <link href="~/Content/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
    <link href="~/Content/css/plugins/clockpicker/clockpicker.css" rel="stylesheet">
    <link href="~/Content/css/plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet">
    <link href="~/Content/css/plugins/select2/select2.min.css" rel="stylesheet">
    <link href="~/Content/css/plugins/touchspin/jquery.bootstrap-touchspin.min.css" rel="stylesheet">
    <link href="~/Content/css/animate.css" rel="stylesheet">
    <link href="~/Content/css/style.css" rel="stylesheet">
    <link href="~/Content/css/plugins/switchery/switchery.css" rel="stylesheet" />
    <link href="~/Content/css/plugins/footable/footable.core.css" rel="stylesheet">
    <link href="~/Content/css/plugins/sweetalert/sweetalert.css" rel="stylesheet">

    <link href="~/Content/css/plugins/select2/select2.min.css" rel="stylesheet">
    <link href="~/Content/css/plugins/clockpicker/clockpicker.css" rel="stylesheet">
    <link href="~/Content/css/animate.css" rel="stylesheet">
    <link href="~/Content/css/plugins/c3/c3.min.css" rel="stylesheet">



    <link href="~/Content/css/plugins/dataTables/datatables.min.css" rel="stylesheet" />
    <link href="~/Content/css/plugins/dataTables/fixedColumns.dataTables.min.css" rel="stylesheet" />
    <link href="~/Content/css/plugins/dataTables/fixedColumns.bootstrap.min.css" rel="stylesheet" />
    <!--demo-->
    @*<link href="~/Content/bootstrap-datetimepicker.min.css" rel="stylesheet" />*@
</head>

<body>
    <div class="hidden">
        <input type="text" id="txtparindex" data-par="PARAMETRO" />
    </div>

    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse" id="menu">
                <ul class="nav metismenu" id="side-menu">

                    <li class="nav-header">
                        <div class="dropdown profile-element">
                            <span>

                            </span>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <span class="clear">
                                    <span class="block m-t-xs">
                                        <strong class="font-bold">@ViewBag.Usuario</strong>
                                    </span>
                                    <span class="text-muted text-xs block"> <b class="caret"></b></span>
                                </span>
                            </a>

                        </div>
                        <div class="logo-element">
                            NSP School
                        </div>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-th-large"></i>
                            <span class="nav-label">Alumno</span>
                            <span class="fa arrow"></span>
                        </a>
                        <ul class="nav nav-second-level _menu collapse" data-nav="WorkFlow">
                            <li data-nav="Alumno/Index">
                                <a class="_menu_sub" href="#">
                                    Notas
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-th-large"></i>
                            <span class="nav-label">Matricula</span>
                            <span class="fa arrow"></span>
                        </a>
                        <ul class="nav nav-second-level _menu collapse" data-nav="WorkFlow">
                            <li data-nav="Alumno/Matricula">
                                <a class="_menu_sub" href="#">
                                    Ratificacion
                                </a>
                            </li>
                            <li data-nav="Alumno/Consulta">
                                <a class="_menu_sub" href="#">
                                    Consulta
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>

            </div>
        </nav>

        <div id="page-wrapper" class="gray-bg dashbard-1">
            <div class="row border-bottom">
                <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                    <div class="navbar-header">
                        <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                    </div>
                   
                </nav>
            </div>
            <!-- :contenido -->
            <div class="gray-bg" id="divContenido"></div>
            <div class="footer">
                <div class="pull-right">

                </div>
                <div>
                    <strong>NSP School @DateTime.Today.Year </strong>
                </div>
            </div>

        </div>


    </div>
    <!-- :modal -->
    <!--tabindex="-1"-->
    <!-- :edu z-index: 1000000000 !important para que el mensaje se muestre adelante de otro modal-->
    <div class="modal inmodal" id="modal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none; z-index: 1000000000 !important;">
        <div class="modal-dialog">
            <div class="modal-content animated fadeIn">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                    <i class="fa fa-check-circle-o modal-icon" id="modal_icono"></i>
                    <h4 class="modal-title" id="modal_titulo">Mensaje</h4>

                </div>
                <div class="modal-body">
                    <p id="modal_mensaje">
                        Se registro correctamente.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>

                </div>
            </div>
        </div>
    </div>

    <!-- :modal confirmar si; no -->
    <div class="modal inmodal" id="modalConfirm" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content animated fadeIn">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                    <i class="fa fa-question-circle modal-icon" id="modal_icono"></i>
                    <h4 class="modal-title" id="modal_titulo">Confirm</h4>

                </div>
                <div class="modal-body">
                    <div id="modal_body_confirm">

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="btnYes_confirm" class="btn btn-success">Yes</button>
                    <button type="button" id="btnNo_confirm" class="btn btn-default">No</button>

                </div>
            </div>
        </div>
    </div>

    <!-- modal - para ventanas generales -->
    <!-- :edu 20171016 crear dinamicamente los modal-->
    <div class="modal fade classmodalventanageneral" id="modal_ventanaGeneral" tabindex="-1" role="dialog" aria-labelledby="Titulo_" data-dismiss="modal" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog" id="modal_dialogVentanaGeneral" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header bg-primary">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modal_titleVentanaGeneral">New message</h4>
                </div>
                <div class="modal-body">
                    <div id="modal_bodyVentanaGeneral">
                        <!--aqui va la pagina parcial-->
                        <div class="text-center">
                            @*<img src="~/Content/img/wait/wait30x30.gif" alt="Cargando..." />*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- :edu 20171016 crear dinamicamente los modal-->
    <div class="modal fade classmodalventanageneral2" id="modal_ventanaGeneral2" tabindex="-1" role="dialog" aria-labelledby="Titulo_" data-dismiss="modal" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog" id="modal_dialogVentanaGeneral2" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header bg-primary">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modal_titleVentanaGeneral2">New message</h4>
                </div>
                <div class="modal-body">
                    <div id="modal_bodyVentanaGeneral2">
                        <!--aqui va la pagina parcial-->
                        <div class="text-center">
                            @*<img src="~/Content/img/wait/wait30x30.gif" alt="Cargando..." />*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- :edu 20171024 crear dinamicamente los modal :para tallacolor; luego pasar a una funcion-->
    <div class="modal fade classmodalventanageneral3" id="modal_ventanaGeneral3" tabindex="-1" role="dialog" aria-labelledby="Titulo_" data-dismiss="modal" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog" id="modal_dialogVentanaGeneral3" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header bg-primary">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modal_titleVentanaGeneral3">New message</h4>
                </div>
                <div class="modal-body">
                    <div id="modal_bodyVentanaGeneral3">
                        <!--aqui va la pagina parcial-->
                        <div class="text-center">
                            @*<img src="~/Content/img/wait/wait30x30.gif" alt="Cargando..." />*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- modal - para mensajes - alertas -->
    <div class="modal fade classmodalalerta" id="modal_alerta" tabindex="-1" role="dialog" aria-labelledby="Titulo_" data-dismiss="modal" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog" id="modal_dialogalerta" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header bg-primary">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modal_titlealerta">Alert!!</h4>
                </div>
                <div class="modal-body">
                    <div id="modal_bodyalerta">
                        <!--aqui va el mensaje-->
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="col-sm-12 text-right" id="modal_footeralerta">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- :modal para loader(spinner) -->
    <div class="modal inmodal" id="myModalSpinner" style="position: absolute;display:none;top: 30%;left: 10%; z-index: 1000000000 !important;" data-backdrop="static" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content animated flipInY">
                <div class="modal-header">
                    <h4 class="modal-title">Wait!</h4><br><br>
                    <div>
                        <div id="searching_spinner_center" style="position: absolute;display: block;top: 50%;left: 45%;">
                            <div class="sk-spinner sk-spinner-three-bounce">
                                <div class="sk-bounce1"></div>
                                <div class="sk-bounce2"></div>
                                <div class="sk-bounce3"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- menu contextual -->
    <nav id="context-menu" class="context-menu" style="z-index: 1000000 !important;">
        <ul class="context-menu__items">
        </ul>
    </nav>

    @Html.Hidden("urlBase", Url.Content("~/"))
    <!-- Mainly scripts -->

    <script src="~/Scripts/js/jquery-2.1.1.js"></script>
    <script src="~/Scripts/js/plugins/dataTables/datatables.min.js"></script>
    <script src="~/Scripts/js/plugins/dataTables/dataTables.fixedColumns.min.js"></script>
    <script src="~/Scripts/Home/Util.js"></script>
    <script src="~/Scripts/Home/Ruteador.js"></script>
    <script src="~/Scripts/js/plugins/math/math.min.js"></script>

    <script src="~/Scripts/js/plugins/scanner/jquery.scannerdetection.compatibility.js"></script>
    <script src="~/Scripts/js/plugins/scanner/jquery.scannerdetection.js"></script>

    <script>
        var verMap = "0";
        var startRefresh = "0";
        var viewroute = "";
        var zoom_actual = "";

        window.menu = "";
        window.utilindex = {
            usuario: '',
            password: '',
            menuState: 0,
            botones:[]
        }
        
        let menu = document.getElementById('menu'),
                amenus = _Array(menu.getElementsByClassName('_menu_sub'));
        amenus.forEach(fila=>fila.addEventListener('click', e=> { _Go(e); }));
        


        function cargarvista(url){
            ////Get(url, res_view);

            //_Go_Url(url, url, '');
            $.ajax({
                type: 'GET',
                url: urlBase() + url,
                data:null,
                async: false
            }).done(function (rsta) {
                login = rsta.indexOf('Login') > 0;
                let urlB = urlBase();
                if (!login) {
                    setTimeout(function () {
                        var vista=par;
                        var menu= _('menu');
                        var alis= Array.from(menu.getElementsByTagName('li'));
                        var index= alis.findIndex(x=>x.dataset.nav===vista);
                        if(index>=0) alis[index].children[0].click();
                    }, 2000);

                    //contenido = (par !== null && par !== '') ? rsta.replace('DATA-PARAMETRO', par) : rsta;
                    //_('divContenido').innerHTML = contenido;
                    //checkloadjscssfile(urlB + `Scripts/${url}.js`, "js");
                } else {
                    window.location.href = urlB + "Home/LoginERP";
                }
            });
        }

        function res_view(res) {
            _('divContenido').innerHTML = res;
        }
        

        function toggleMenuOn(e) {
            //if ( window.utilindex.menuState !== 1 ) {
            window.utilindex.menuState = 1;
            //menu.classList.add( contextMenuActive );
            _('context-menu').classList.add('context-menu--active');
            let controller = e.currentTarget.parentNode.getAttribute('data-nav'), area = e.currentTarget.parentNode.parentNode.getAttribute('data-nav'), html = '',
                url = window.appURL.erp + area + '/' + controller, classerp = ''; //localhost:4012 ; 192.168.0.3/erpdesarrollo; 172.16.1.22/erp

            if (e.currentTarget.classList.contains('erp1')) {
                classerp = 'erp1';
            } else if (e.currentTarget.classList.contains('erp2')) {
                classerp = 'erp2';
            }

            html += `<li class="context-menu__item">`;
            html += `   <a href='javascript:void(0)' class="context-menu__link ${classerp}" data-nav='${url}'>Open link in a new tab</a>`;  // ${e.currentTarget.textContent}
            html += `</li>`;

            //document.getElementsByClassName('context-menu__items').innerHTML = html;
            $(".context-menu__items").html('');
            $(".context-menu__items").append(html);
            //}
        }


        function positionMenu(e) {
            let menu = _('context-menu');
            let clickCoords = getPosition(e);
            let clickCoordsX = clickCoords.x;
            let clickCoordsY = clickCoords.y;
            let menuWidth = menu.offsetWidth + 4;
            let menuHeight = menu.offsetHeight + 4;
            let windowWidth = window.innerWidth;
            let windowHeight = window.innerHeight;

            if ( (windowWidth - clickCoordsX) < menuWidth ) {
                menu.style.left = windowWidth - menuWidth + "px";
            } else {
                menu.style.left = clickCoordsX + "px";
            }

            if ( (windowHeight - clickCoordsY) < menuHeight ) {
                menu.style.top = windowHeight - menuHeight + "px";
            } else {
                menu.style.top = clickCoordsY + "px";
            }
        }

        function getPosition(e) {
            var posx = 0;
            var posy = 0;

            if (!e) var e = window.event;

            if (e.pageX || e.pageY) {
                posx = e.pageX;
                posy = e.pageY;
            } else if (e.clientX || e.clientY) {
                posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
                posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
            }

            return {
                x: posx,
                y: posy
            }
        }

    
        function toggleMenuOff() {
            if ( window.utilindex.menuState !== 0 ) {
                window.utilindex.menuState = 0;
                let menu = _('context-menu');
                menu.classList.remove('context-menu--active');
            }
            $(document.body).removeAttr("style");
        }

        function clickListener() {
            document.addEventListener( "click", function(e) {
                var clickeElIsLink = clickInsideElement(e, "context-menu__link");

                if ( clickeElIsLink ) {
                    e.preventDefault();
                    menuItemListener( clickeElIsLink );
                } else {
                    var button = e.which || e.button;
                    if ( button === 1 ) {
                        toggleMenuOff();
                    }
                }
            });
        }

        function menuItemListener( element ) {
            //console.log( "Task ID - " + taskItemInContext.getAttribute("data-id") + ", Task action - " + link.getAttribute("data-action"));
            //console.log(link);
            let urlaccion = element.getAttribute('data-nav'), link = document.createElement('a'), classerp = '';

            if (element.classList.contains('erp2')) {
                urlaccion = window.appURL.erpnew + 'Home/Index'; //localhost:55659 ; 192.168.0.3/erp_newarq; 172.16.1.22/erpnew
            }

            link.href = urlaccion;
            link.target = '_blank';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            delete link;

            toggleMenuOff();
        }

        function keyupListener() {
            window.onkeyup = function(e) {
                if ( e.keyCode === 27 ) {
                    toggleMenuOff();
                }
            }
        }

        function resizeListener() {
            window.onresize = function(e) {
                toggleMenuOff();
            };
        }

     
    </script>

</body>

</html>

<script src="~/Scripts/js/bootstrap.min.js"></script>
<script src="~/Scripts/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="~/Scripts/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Custom and plugin javascript -->
<script src="~/Scripts/js/inspinia.js"></script>
<script src="~/Scripts/js/plugins/pace/pace.min.js"></script>
<script src="~/Scripts/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="~/Scripts/js/plugins/footable/footable.all.min.js"></script>
<script src="~/Scripts/js/plugins/sweetalert/sweetalert.min.js"></script>
<script src="~/Scripts/js/plugins/select2/select2.full.min.js"></script>
<script src="~/Scripts/js/plugins/clockpicker/clockpicker.js"></script>
<script src="~/Scripts/js/plugins/validate/jquery.validate.min.js"></script>
<script src="~/Scripts/js/plugins/metisMenu/jquery.metisMenu.js"></script>

<!-- jQuery UI -->
<script src="~/Scripts/js/plugins/jquery-ui/jquery-ui.min.js"></script>

<!-- Chosen -->
<script src="~/Scripts/js/plugins/chosen/chosen.jquery.js"></script>

<!-- Select2 -->
<script src="~/Scripts/js/plugins/select2/select2.full.min.js"></script>

<!-- TouchSpin -->
<script src="~/Scripts/js/plugins/touchspin/jquery.bootstrap-touchspin.min.js"></script>

<!-- Datepicker -->
<script src="~/Scripts/js/plugins/datapicker/bootstrap-datepicker.js"></script>

<!-- iCheck -->
<script src="~/Scripts/js/plugins/iCheck/icheck.min.js"></script>

<!-- iboxtools -->
<script src="~/Scripts/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Date range use moment.js same as full calendar plugin -->
<script src="~/Scripts/js/plugins/fullcalendar/moment.min.js"></script>


<!-- Date range picker -->
<script src="~/Scripts/js/plugins/daterangepicker/daterangepicker.js"></script>

<!-- Extra -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/autonumeric/1.9.46/autoNumeric.min.js" type="text/javascript"> </script>

<!--Animacion CSS-->
<script src="~/Scripts/js/plugins/rickshaw/vendor/d3.v3.js"></script>
<script src="~/Scripts/js/plugins/rickshaw/rickshaw.min.js"></script>

<!--c3-->
<script src="~/Scripts/js/plugins/d3/d3.min.js"></script>
<script src="~/Scripts/js/plugins/c3/c3.min.js"></script>



<script src="~/Scripts/js/bootstrap-multiselect.js"></script>
<script src="~/Scripts/js/plugins/switchery/switchery.js"></script>

<script src="~/Scripts/js/plugins/fullcalendar/moment.min.js"></script>
<script src="~/Scripts/js/plugins/iCheck/icheck.min.js"></script>


<script src="~/Scripts/moment-with-locales.min.js"></script>
<script src="~/Scripts/bootstrap-datetimepicker.min.js"></script>

